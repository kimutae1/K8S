openssl req -newkey rsa:4096 -nodes -sha256 -keyout my-cluster-ca.key -x509 -days 365 -out my-cluster-ca.crt -subj "/CN=My Cluster CA"

# Kubernetes API 서버에 인증서를 등록합니다.
#kubectl create secret tls my-cluster-ca --cert=path/to/ca.crt --key=path/to/ca.key
kubectl create secret tls my-cluster-ca --cert=my-cluster-ca.crt --key=my-cluster-ca.key
# Kubernetes API 서버의 구성 파일을 수정합니다.
#kubectl config set-cluster my-cluster --server=https://<kubernetes-api-server-host>:<kubernetes-api-server-port> --certificate-authority=path/to/ca.crt
kubectl config set-cluster lucas-test --server=https://F29FA56B5F3333F728AE16D7A340329D.gr7.ap-northeast-2.eks.amazonaws.com --certificate-authority=my-cluster-ca.crt

# 클러스터의 인증서를 지정합니다.
#kubectl config set-cluster my-cluster --certificate-authority-data=$(kubectl get secret my-cluster-ca -o jsonpath='{.data.ca\.crt}')
kubectl config set-cluster lucas-test --certificate-authority-data=$(kubectl get secret my-cluster-ca -o jsonpath='{.data.tls\.crt}')

#위의 예시에서는 
#my-cluster-ca
#라는 이름으로 Kubernetes API 서버에 등록된 인증서를 사용하여 클러스터의 인증서를 지정하도록 설정하였습니다. 이후 
#kubectl config set-cluster
# 명령어를 사용하여 클러스터의 구성 정보를 수정하였습니다. 마지막으로 
#kubectl config set-cluster
# 명령어를 사용하여 
#certificate-authority-data
# 필드를 추가하였습니다. 이 필드는 Kubernetes API 서버의 인증서를 지정하는 데 사용됩니다.